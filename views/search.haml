!!!
%html{:lang => "en"}
  %head
    %meta{:charset => "utf-8"}/
    %meta{:content => "width=768", :name => "viewport"}/
    %link{:href => "stylesheets/thijs.css", :rel => "stylesheet"}/
    %link{:href => "stylesheets/picky.css", :rel => "stylesheet"}/
    %link{:href => "favicon.ico", :rel => "shortcut icon" }
    %title CocoaPods: The Objective-C Library Manager
    / %link{:href => "#todo", :rel => "alternate", :title => "Latest CocoaPods", :type => "application/atom+xml"}/
    = js 'jquery-1.5.0.min'
    = js 'history.min'
    = js 'history.adapter.jquery.min'
    = js 'picky.min'
  %body.desktop
    %div
      %section#intro
        %hgroup
          %img{:alt => "", :src => "images/logo.png"}/
          %h1 CocoaPods
          %h2
            The best way to manage library dependencies in Objective-C
            / iOS or OS X
            / your Xcode
            projects
        %p
          Specify the libraries for your project in an easy to edit text file. Then use CocoaPods to resolve all dependencies, fetch the source, and set up
          / and maintains
          your Xcode workspace.
      /
        <pre><code>dependency 'CocoaLumberjack'
        dependency 'ASIHTTPRequest', '&amp;gt;= 1,8,1'
        </code></pre>
      /
        <ol>
        <li>Resolves dependencies</li>
        <li>Fetches source code</li>
        <li>Manages build settings</li>
        </ol>
      #box
        %section#search
          .form
            %div
              %label{ :class => (:checked if @platform == :both), "x-onclick" => "" }
                %input{ :checked => (:checked if @platform == :both), :name => "platform", :type => "radio", :value => "on:osx on:ios" }/
                %span
                  %b
                  %span OS X and iOS
              %label{ :class => (:checked if @platform == :ios), "x-onclick" => "" }
                %input{ :checked => (:checked if @platform == :ios), :name => "platform", :type => "radio", :value => "on:ios" }/
                %span
                  %b
                  %span For iOS
              %label{  :class => (:checked if @platform == :osx), "x-onclick" => "" }
                %input{ :checked => (:checked if @platform == :osx), :name => "platform", :type => "radio", :value => "on:osx" }/
                %span
                  %b
                  %span For OS X
            %input{ :placeholder => "Search pods", :type => "search", "x-autofocus" => "", "x-value" => "XTesting", :class => 'query' }/
          .no_results
            %h3 No Pods found
          .allocations
            %ol.shown
            %ol.more
              %h3 More
            %ol.hidden
          .results
          / TODO: Microformats? Should we include a link to the podspec? Any other fields? Dependencies?
        %section#install
          %h2 Install
          %p It only takes a few minutes to get CocoaPods.
          %p
            CocoaPods runs on MacRuby. If you don’t have a recent version of MacRuby you will need to
            %a{:href => "http://www.macruby.org/downloads.html"} download and install
            the latest stable release.
          /
            <pre><code>$ curl -O http://www.macruby.org/files/MacRuby%200.10.zip
            $ open MacRuby%200.10.zip
            \# open MacRuby\ 0.10/MacRuby\ 0.10.pkg
            </code></pre>
          %p Once you’ve got MacRuby, install CocoaPods from the Terminal:
          %pre
            %code
              :preserve
                $ sudo macgem install cocoapods
                $ pod setup
          %p
            Now that you’ve got CocoaPods installed it’s time to
            = succeed "." do
              %a{:href => "#get_started"} get started
        %section#get_started
          %h2 Get started
          %p
            %a{:href => "#search"} Search
            for pods by name and description.
          %p
            Then list the dependencies in a text file named
            %tt Podfile
            in your Xcode project directory:
          %pre
            %code
              :preserve
                $ vim Podfile
                dependency 'JSONKit',       '~&gt; 1.4'
                dependency 'Reachability',  '~&gt; 3.0.0'
          %p Now you can install the dependencies in your project:
          %pre
            %code
              :preserve
                $ pod install
          %h3 Please note
          %p Make sure to always open the Xcode workspace instead of the project file when building your project:
          %pre
            %code
              :preserve
                $ open App.xcworkspace
          %h3 How to create a pod
          %p Sometimes CocoaPods doesn’t yet have a pod for one of your dependencies. Fortunately, creating a pod is pretty easy:
          %pre
            %code
              :preserve
                $ pod spec create Peanut
                $ edit Peanut.podspec
                $ pod spec lint Peanut.podspec
          / TODO: Peanuts might be a confusing example for a project name.
          %p
            When you’re done, please
            %a{:href => "https://github.com/CocoaPods/CocoaPods/issues"} create a ticket
            and upload the pod. You can also fork the
            %a{:href => "https://github.com/CocoaPods/Specs"} CocoaPods specs
            GitHub repository and send a pull request
            / if you are familiar with Git
            \. We really love contributions!
          / TODO: Shouldn’t we highlight why it is handy and what other commands you might need to update your dependencies?
        %section#contribute
          %h2 Contribute
          %p
            We’re developing CocoaPods on GitHub. There’s a repository for the
            %a{:href => "https://github.com/CocoaPods/CocoaPods"} CocoaPods tool
            and one for the
            = succeed "." do
              %a{:href => "https://github.com/CocoaPods/Specs"} pods specs
            It’s easy and really gratifying to contribute patches or pods,
            you even get push access when one of your specs or patches is accepted.
          %p
            Follow
            %a{:href => "http://twitter.com/CocoaPodsOrg"} CocoaPodsOrg
            on Twitter to get up to date information about what’s going on
            in the CocoaPods world.
      %footer
        %p
          CocoaPods is a project from
          %a{:href => "http://twitter.com/alloy"} Eloy Durán
          with contributions from
          %a{:href => "https://github.com/CocoaPods/CocoaPods/contributors"} and many others.
          Website by
          %a{:href => "http://twitter.com/thijs"} Thijs van der Vossen
          and
          = succeed "." do
            %a{:href => "http://twitter.com/manfreds"} Manfred Stienstra
          Search uses
          %a{:href => "http://florianhanke.com/picky/"} Picky
          by
          = succeed "." do
            %a{:href => "http://twitter.com/hanke"}
              Florian Hanke
          Logo by
          = succeed "." do
            %a{:href => "http://twitter.com/maxsteenbergen"} Max Steenbergen
          Sponsored by
          %a{:href => "http://www.fngtps.com/"} Fingertips
          and
          = succeed "." do
            %a{:href => "https://www.sauspiel.de/"} Sauspiel
          / TODO: Do we have more sponsors?
    / %script{:src => "javascripts/zepto.js"}
    
    :javascript
      // TODO Add tap gesture support to the cycle button?
      $(window).ready(function() {
        pickyClient = new PickyClient({
          full: '/search',
		  
          // The live query does a full query.
          //
          live: '/search',
          liveResults: 20,
          liveRendered: true, // Experimental: Render live results as if they were full ones.
          liveSearchInterval: 60, // Time between keystrokes before it sends the query.

          // Instead of enclosing the search in #picky,
          // in the CocoaPods search we use #search.
          //
          enclosingSelector: '#search',

          // Before Picky sends any data to the server.
          //
          // Adds the platform modifier to it if it isn't there already.
          //
          before: function(query, params) {
            if (query.match(/(platform|on)\:/)) {
              return query;
            }
            var platformModifier = $('#search label.checked input').val();
            return platformModifier + ' ' + query;
          },
          // success: function(data, query) {  }, // Just after Picky receives data.
          // after: function(data, query) {  }, // After Picky has handled the data and updated the view.

          // This is used to generate the correct query strings, localized. E.g. "subject:war".
          // Note: If you don't give these, the field identifier given in the Picky server is used.
          //
          qualifiers: {
            en:{
              dependencies: 'uses',
              platform: 'on'
            }
          },

          // Use this to group the choices (those are used when Picky needs more feedback).
          // If a category is missing, it is appended in a virtual group at the end.
          // Optional. Default is [].
          //
          //groups: [['author', 'title', 'subjects']],
          // This is used for formatting inside the choice groups.
          //
          // Use %n$s, where n is the position of the category in the key.
          // Optional. Default is {}.
          //
          choices: {
            en: {
              'name,platform': 'named %1$s', // platform is not shown.
              'platform,name': 'named %2$s',
              'author,platform': 'written by %1$s',
              'platform,author': 'written by %2$s',
              'summary,platform': '%1$s in summary',
              'platform,summary': '%2$s in summary',
              'dependencies,platform': 'using %1$s',
              'platform,dependencies': 'using %2$s',
              'platform,author,name': '%3$s, written by %2$s',
              'platform,name,author': '%2$s, written by %3$s',
              'platform,name,version': '%2$s, version %3$s',
              'platform,version,name': '%2$s of %3$s',
              'platform,name,dependencies': '%2$s, using %3$s',
              'platform,dependencies,name': '%2$s used by %3$s',
              'platform,author,dependencies': 'written by %2$s and using %3$s',
              'platform,dependencies,author': 'using %2$s, written by %3$s',
              'platform,dependencies,version': '%2$s used by version %3$s',
              'platform,version,dependencies': '%3$s used by version %2$s',
              'platform,summary,name': '%3$s with \"%2$s\" in summary',
              'platform,name,summary': '%2$s with \"%3$s\" in summary',
              'platform,summary,author': 'written by %3$s with \"%2$s\" in summary',
              'platform,author,summary': 'written by %2$s with \"%3$s\" in summary'
            }
          },

          // This is used to explain the preceding word in the suggestion text (if it
          // has not yet been defined by the choices above), localized. E.g. "Peter (author)".
          // Optional. Default are the field identifiers from the Picky server.
          //
          explanations: {
            en:{
              name: 'named',
              author: 'written by',
              versions: 'version',
              dependencies: 'using',
              platform: 'on',
              summary: 'with summary'
            }
          }
        });

        // An initial search text, prefilled
        // this one is passed through the query param q.
        //
        // Example: www.mysearch.com/?q=example
        //
        pickyClient.insertFromURL('#{@query}');
        
        $('#search input[type=radio]').click(function() {
          $(this).parent().addClass('checked').siblings().removeClass('checked');
          pickyClient.resend();
        });
		
        // $('body').addClass($.os.ios ? 'ios' : 'desktop');
      });
